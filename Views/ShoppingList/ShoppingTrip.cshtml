@{
    ViewData["Title"] = "Shopping Trip";
}

@using GroceryDash.Models

@if(@ViewBag.ShoppingList != null && @ViewBag.Store != null && @ViewBag.Isles != null){
    <h3>@ViewBag.ShoppingList.Name - @ViewBag.Store.Name</h3>

   
    @foreach(IsleProducts isle in ViewBag.Isles){

        string seperator = ", ";
        int i = 1;

        <h4>Isle @isle.Position - @isle.Name</h4>

        <p>@foreach(IslesProductCategories cat in isle.ProductCategories){
               @cat.ProductCategory.Name
               if(i < isle.ProductCategories.Count){
                   @seperator
                }
                i++;
            }
        </p>
        
        <ul>

            @foreach(Product product in isle.Products){
                <li>@product.Name <input type="checkbox"></li>
            }
        </ul>
        
    }

    <p><a asp-controller="ShoppingList" asp-action="MarkComplete" asp-route-id="@ViewBag.ShoppingList.id"><button>Mark Trip Complete</button></a></p>
}

<p><a asp-controller="ShoppingList" asp-action="Dashboard"><button>Back To Dashboard</button></a></p>